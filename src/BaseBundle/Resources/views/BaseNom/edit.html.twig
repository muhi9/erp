{% extends "::base.html.twig" %}

{% block title %}{{'basenom.basenom_edit'|trans}}{% endblock %}


{% block content_body %}
<!-- begin:: Content Body -->
 <a href="{{ path('basenom_list', { 'page': 'basenom_add'})}}" class="k-margin-r-5  btn btn-brand k-content__head-back-link"><i class="flaticon-reply"></i>{{'label.back'|trans }}</a>

<div class="row">
  <div class="col-md-12">
    <div class="k-portlet">
      <div class="k-portlet__head">
        <div class="k-portlet__head-label">
          <h3 class="k-portlet__head-label">{{'basenom.edit_basenom'|trans}}</h3>
        </div>
      </div>
{% include 'BaseBundle:BaseNom:add_form.html.twig' %}

    </div>
  </div>
</div>
<script type="text/javascript">
$(function() {
  document.addEventListener("formValidationEnd", function(e) {
    //console.log('dddd',e)
    if ('detail' in e && 'returnData' in e.detail && isObject(e.detail.returnData) && 'redirect' in e.detail.returnData) {
      top.location.href=e.detail['returnData']['redirect'];
    }
    //console.log('formvalidation finised OK',e, JSON.stringify(e.detail));
  }, false);
});
</script>

<!-- end:: Content Body -->

{% endblock content_body %}


{% block javascripts %}
    {{ parent() }}

{% if extraFields is defined and extraFields is not empty %}
  <script>
$(function() {
  /*
   $.each({{extraFields|json_encode|raw}}, function(key,value) {
    if (value == 'nullable') return true;
     sp ='<div  id ="ex'+key+'" class="baseNomNameExtra form-group"><div class="form-group row validate"><label class="col-form-label col-lg-3 col-sm-12">Extra: '+key+'</label><div class="col-lg-9 col-md-9 col-sm-12"><input type="text" class="form-control name"  im-insert="true" aria-describedby="type-error" name="extraFields['+key+']" value="'+value+'" /><div></div></div>';
      $(sp).insertAfter(parent);
console.log('addextraform',key,value,parent)
    })
*/
      parent = $('#BaseBundle_basenoms_name').closest('div.form-group');
  addExtra({{extraFields|json_encode|raw}}, parent);
})
  </script>
{%endif%}

{#% javascripts filter='uglifyjs2' "@BaseBundle/Resources/public/js/basenom.js"%}
        <script src="{{ asset_url }}" type="text/javascript"></script>
{% endjavascripts %#}


{% endblock %}
{% block stylesheets %}
    {{ parent() }}
{% endblock %}

